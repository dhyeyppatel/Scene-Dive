<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>File Finder</title>
  <style>
    :root { --border:#e5e7eb; --muted:#6b7280; }
    *{box-sizing:border-box} body{font-family:system-ui,Arial,sans-serif;line-height:1.45;margin:0;padding:24px;max-width:900px}
    h1{margin:0 0 12px;font-size:22px}
    .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    input{flex:1;min-width:260px;padding:12px 14px;border:1px solid var(--border);border-radius:12px;font-size:16px}
    .count{color:var(--muted);font-size:14px}
    ul{list-style:none;margin:16px 0 60px;padding:0}
    li{border:1px solid var(--border);border-radius:14px;padding:12px 14px;margin:10px 0;display:flex;gap:12px;align-items:center}
    a{color:#111827;text-decoration:none} a:hover{color:#2563eb}
    .size{color:var(--muted);font-size:12px}
    .open{margin-left:auto;white-space:nowrap;background:#111827;color:#fff;padding:8px 12px;border-radius:10px;font-size:14px;text-decoration:none}
    .footer{position:fixed;left:0;right:0;bottom:0;padding:10px 16px;border-top:1px solid var(--border);background:#fff;color:var(--muted);font-size:12px}
  </style>
</head>
<body>
  <h1>File Finder</h1>
  <div class="row">
    <input id="q" placeholder="Search titleâ€¦ (e.g., guest, srt, movie name)" autofocus />
    <div class="count" id="count">Loadingâ€¦</div>
  </div>
  <ul id="list"></ul>

  <div class="footer">
    Tip: Click a result to open Telegram bot and receive the file.
  </div>

<script>
  // ðŸ‘‰ Set your bot username (no @)
  const BOT = "dhyeyautofilterobot";

  // files.json must be an array of { t: "title", fid: "file_id", s: number }
  let DB = [];
  const q = document.getElementById('q');
  const ul = document.getElementById('list');
  const count = document.getElementById('count');

  // Load data
  fetch('files.json')
    .then(r => r.json())
    .then(j => { DB = j || []; count.textContent = DB.length + " items"; render(DB.slice(0,100)); })
    .catch(() => { count.textContent = "Failed to load files.json"; });

  // Helpers
  function sizeHuman(n){
    if(!n || isNaN(n)) return "â€”";
    const u = ["B","KB","MB","GB","TB"]; let i=0; while(n>=1024 && i<u.length-1){ n/=1024; i++; }
    return n.toFixed(i?1:0)+" "+u[i];
  }
  // Debounce typing
  let timer;
  q.addEventListener('input', () => {
    clearTimeout(timer);
    timer = setTimeout(() => doSearch(q.value.trim().toLowerCase()), 150);
  });

  function doSearch(term){
    if(!term){ count.textContent = DB.length+" items"; return render(DB.slice(0,100)); }
    const res = DB.filter(x => x.t && x.t.toLowerCase().includes(term));
    count.textContent = res.length+" match(es)";
    render(res.slice(0,200)); // cap to keep page fast
  }

  function render(rows){
    ul.innerHTML = '';
    rows.forEach(x => {
      const li = document.createElement('li');
      const title = document.createElement('div');
      const link = document.createElement('a');
      link.href = `https://t.me/${BOT}?start=${encodeURIComponent(x.fid)}`;
      link.target = "_blank";
      link.textContent = x.t || "Untitled";

      const size = document.createElement('div');
      size.className = 'size';
      size.textContent = sizeHuman(x.s);

      const openBtn = document.createElement('a');
      openBtn.className = 'open';
      openBtn.href = link.href;
      openBtn.target = "_blank";
      openBtn.textContent = 'Open in Telegram';

      title.appendChild(link);
      title.appendChild(size);
      li.appendChild(title);
      li.appendChild(openBtn);
      ul.appendChild(li);
    });
  }
</script>
</body>
</html>
